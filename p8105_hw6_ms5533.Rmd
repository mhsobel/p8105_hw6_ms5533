---
title: "Homework 6"
author: "Marisa Sobel"
date: "11/16/2018"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(modelr)
library(mgcv)

set.seed(1)

theme_set(theme_bw() + theme(legend.position = "bottom"))
```

# Problem 1

### DATA IMPORT AND TIDY

```{r, collapse=TRUE, message=FALSE}
wp_homicide_data = 
  read_csv("./data/data-homicides-master/homicide-data.csv") %>% 
  mutate(city_state = str_c(city, state, sep = ", ")) %>% 
  filter(city_state != "Tulsa, AL" | city_state != "Dallas, TX" | city_state != "Pheonix, AZ") %>% 
  select(-uid, -reported_date, -victim_first, -victim_last, -lat, -lon, -city, -state) %>% 
  mutate(
    victim_race = as_factor(tolower(victim_race)), 
    victim_race = fct_relevel(victim_race, "white"), 
    victim_race = fct_collapse(victim_race, non_white = c("hispanic", "black", "asian", "other")), 
    victim_race = na_if(victim_race, "unknown")) %>% 
  mutate(
    victim_sex = as_factor(tolower(victim_sex)), 
    victim_sex = fct_relevel(victim_sex, "male"), 
    victim_sex = na_if(victim_sex, "unknown")) %>% 
  mutate(
    victim_age = as.numeric(victim_age)) %>% 
  mutate(
    disposition = as_factor(disposition), 
    disposition = fct_collapse(disposition, unresolved = c("Closed without arrest", "Open/No arrest"), resolved = "Closed by arrest"), 
    disposition = fct_relevel(disposition, "resolved"))

wp_homicide_data
```

### BALTIMORE, MD  
#### GLM (resolved/unresolved)

```{r}
baltimore_dat = 
  wp_homicide_data %>% 
  filter(city_state == "Baltimore, MD")

fit = glm(disposition ~ victim_age + victim_sex + victim_race, data = baltimore_dat, family = binomial)

  
```

### ALL CITIES  
#### GLM (resolved/unresolved)

```{r}

```

### ALL CITIES
#### Plot - ORs + CIs 

```{r}

```


# Problem 2

### DATA IMPORT AND TIDY

```{r, message=FALSE, collapse=TRUE, eval=FALSE}
birthweight_data = 
  read_csv("./data/birthweight.csv") %>% 
  mutate(
    babysex = factor(babysex, labels = c("male", "female")), 
    frace = factor(frace, labels = c("white", "black", "asian", "puerto_rican", "other", "unknown")))


  mutate(
    name = recode(id, USW00094728 = "CentralPark_NY", 
                      USC00519397 = "Waikiki_HA",
                      USS0023B17S = "Waterhole_WA"),
```

