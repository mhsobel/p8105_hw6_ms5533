Homework 6
================
Marisa Sobel
11/16/2018

# Problem 1

### DATA IMPORT AND TIDY

``` r
wp_homicide_data = 
  read_csv("./data/data-homicides-master/homicide-data.csv") %>% 
  mutate(city_state = str_c(city, state, sep = ", ")) %>% 
  filter(city_state != "Tulsa, AL" | city_state != "Dallas, TX" | city_state != "Pheonix, AZ") %>% 
  select(-uid, -reported_date, -victim_first, -victim_last, -lat, -lon, -city, -state) %>% 
  mutate(
    victim_race = as_factor(tolower(victim_race)), 
    victim_race = fct_relevel(victim_race, "white"), 
    victim_race = fct_collapse(victim_race, non_white = c("hispanic", "black", "asian", "other")), 
    victim_race = na_if(victim_race, "unknown")) %>% 
  mutate(
    victim_sex = as_factor(tolower(victim_sex)), 
    victim_sex = fct_relevel(victim_sex, "male"), 
    victim_sex = na_if(victim_sex, "unknown")) %>% 
  mutate(
    victim_age = as.numeric(victim_age)) %>% 
  mutate(
    disposition = as_factor(disposition), 
    disposition = fct_collapse(disposition, unresolved = c("Closed without arrest", "Open/No arrest"), resolved = "Closed by arrest"), 
    disposition = fct_relevel(disposition, "resolved"))
## Warning in evalq(as.numeric(victim_age), <environment>): NAs introduced by
## coercion

wp_homicide_data
## # A tibble: 52,179 x 5
##    victim_race victim_age victim_sex disposition city_state     
##    <fct>            <dbl> <fct>      <fct>       <chr>          
##  1 non_white           78 male       unresolved  Albuquerque, NM
##  2 non_white           17 male       resolved    Albuquerque, NM
##  3 white               15 female     unresolved  Albuquerque, NM
##  4 non_white           32 male       resolved    Albuquerque, NM
##  5 white               72 female     unresolved  Albuquerque, NM
##  6 white               91 female     unresolved  Albuquerque, NM
##  7 non_white           52 male       resolved    Albuquerque, NM
##  8 non_white           52 female     resolved    Albuquerque, NM
##  9 white               56 male       unresolved  Albuquerque, NM
## 10 non_white           43 male       unresolved  Albuquerque, NM
## # ... with 52,169 more rows
```

### BALTIMORE, MD

#### GLM (resolved/unresolved)

``` r
baltimore_dat = 
  wp_homicide_data %>% 
  filter(city_state == "Baltimore, MD")

fit = glm(disposition ~ victim_age + victim_sex + victim_race, data = baltimore_dat, family = binomial)
```

### ALL CITIES

#### GLM (resolved/unresolved)

### ALL CITIES

#### Plot - ORs + CIs

# Problem 2

### DATA IMPORT AND TIDY

``` r
birthweight_data = 
  read_csv("./data/birthweight.csv") %>% 
  mutate(
    babysex = factor(babysex, labels = c("male", "female")), 
    frace = factor(frace, labels = c("white", "black", "asian", "puerto_rican", "other", "unknown")))


  mutate(
    name = recode(id, USW00094728 = "CentralPark_NY", 
                      USC00519397 = "Waikiki_HA",
                      USS0023B17S = "Waterhole_WA"),
```
